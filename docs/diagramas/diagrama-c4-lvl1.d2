# Location404 System Architecture

jogador: {
  shape: c4-person
  label: "Jogador\nUsuário que joga partidas, edita perfil e vê rankings"
  width: 420
  height: 280
}

location404: "Location404" {
  webApp: "Frontend" {
    shape: rectangle
    label: "Frontend\n[Vue 3]\n\nInterface web responsiva para interação com o jogo"
    style.fill: "#1168bd"
    style.stroke: "#0b4884"
  }

  authService: "UserIdentity-Service" {
    shape: rectangle
    label: "UserIdentity-Service\n[.NET]\n\nGerencia cadastro, login, autenticação e perfis de usuário"
    style.fill: "#1168bd"
    style.stroke: "#0b4884"
  }

  gameEngine: "GameCore-Engine" {
    shape: rectangle
    label: "GameCore-Engine\n[.NET)\n\nGerencia lógica principal do jogo e cálculo de pontuação"
    style.fill: "#1168bd"
    style.stroke: "#0b4884"
  }

  geoService: "GeoData-Service" {
    shape: rectangle
    label: "GeoData-Service\n[.NET]\n\nFornece e gerencia dados geográficos para o jogo"
    style.fill: "#1168bd"
    style.stroke: "#0b4884"
  }

  rankingService: "Ranking-Service" {
    shape: rectangle
    label: "Ranking-Service\n[.NET]\n\nArmazena histórico de partidas e gera rankings globais"
    style.fill: "#1168bd"
    style.stroke: "#0b4884"
  }

  userDb: "User DB" {
    shape: cylinder
    label: "User DB\n[PostgreSQL]\n\nArmazena dados de usuários\n e autenticação"
    style.fill: "#23a2d6"
    style.stroke: "#105996"
    width: 230
  }

  gameDb: "Game DB" {
    shape: cylinder
    label: "Game DB\n[PostgreSQL]\n\nArmazena dados das partidas, \npontuação e histórico"
    style.fill: "#23a2d6"
    style.stroke: "#105996"
    width: 230
  }

  geoDb: "Geo DB" {
    shape: cylinder
    label: "Geo DB\n[MongoDB]\n\nArmazena dados geoespaciais \nutilizados nas partidas"
    style.fill: "#23a2d6"
    style.stroke: "#105996"
    width: 230
  }

  style.fill: "#f0f0f0"
  style.stroke: "#cccccc"
  style.stroke-dash: 5
}

# External Systems
googleOAuth: "Google OAuth" {
  shape: rectangle
  label: "Google OAuth\nAutenticação externa via conta Google"
  style.fill: "#999999"
  style.stroke: "#666666"
}

facebookOAuth: "Facebook OAuth" {
  shape: rectangle
  label: "Facebook OAuth\nAutenticação externa via conta Facebook"
  style.fill: "#999999"
  style.stroke: "#666666"
}

apiMapas: "APIs de Mapas" {
  shape: rectangle
  label: "APIs de Mapas\nGoogle Maps / OpenStreetMap"
  style.fill: "#999999"
  style.stroke: "#666666"
}

emailService: "Serviço de E-mail" {
  shape: rectangle
  label: "Serviço de E-mail\nEnvio de e-mails de recuperação de senha"
  style.fill: "#999999"
  style.stroke: "#666666"
}

# Relationships
jogador -> location404.webApp: "Acessa via navegador"
location404.webApp -> location404.authService: "Realiza login e autenticação"
location404.webApp -> location404.gameEngine: "Inicia partidas, envia palpites e recebe feedback"
location404.webApp -> location404.rankingService: "Consulta rankings e histórico"
location404.authService -> location404.userDb: "Lê/Grava dados de usuário"
location404.authService -> googleOAuth: "Autentica via Google"
location404.authService -> facebookOAuth: "Autentica via Facebook"
location404.authService -> emailService: "Envia recuperação de senha"
location404.gameEngine -> location404.gameDb: "Lê/Grava dados de partidas"
location404.gameEngine -> location404.geoService: "Solicita dados geográficos"
location404.rankingService -> location404.gameDb: "Consulta dados de pontuação"
location404.geoService -> location404.geoDb: "Lê dados geográficos"
location404.geoService -> apiMapas: "Consulta imagens e metadados geográficos"